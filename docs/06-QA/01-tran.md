---
title: 接入问题
---


**Q：单机游戏的 userId 如何储存？**

A：单机游戏的 userId 需要注意以下几点：

（1）iOS 得自己生成一个 ID 存到证书空间，iOS 有个存储空间，一个是应用，一个是证书（企业）。

（2）安卓尽量存到 SD 卡，用一个用户操作或者 1 分钟后调用 setUser。

（3）随机生成一个唯一用户 ID，并保存到本地。

**Q：为什么 SDK 接入后没有新增数据？**

A：请检查 SDK 初始化是否调用成功，另外初始化应该最早调用。若初始化失败，则根据失败日志做对应处理。

**Q：服务端和客户端都需要传递充值数据么？**

A：在服务端和客户端选择一种方式传递充值数据即可。若同时传递，则充值数据会翻倍。

**Q：为什么服务端传递充值数据 TapDB 页面没有显示收入或者收入比实际要多？**

A：首先服务端和客户端的接口只能用其中一个（若都使用的话会展示双倍充值金额，并确保充值成功再发送充值数据），其次服务端「identify」: 「user_id」里的 user_id 和文档「纪录一个玩家」中的 setUser 里的「userId」需要保持一致。

**Q：为什么实时在线数据发送后 TapDB 显示没有数据？**

A：没有显示数据可能有以下几种原因：

（1）检查文件格式，参数类型（返回 400 报错说明格式不对）

（2）注意时间戳单位（秒），并且只能发送近 7 日数据，太早的数据不会保存

**（3）注意：是否有必须头信息：Content-Type: application/json**

**Q：可以为空的参数能不填么？**

A：不能，可以为空的参数填 null。

**Q：为什么填了 channel 在 TapDB 里找不到这个分包渠道？**

A：必须要有一个新增数据 TapDB 才能接收到这个渠道，才能在这个页面里显示这个分包渠道。

**Q：TapDB 上报事件时，事件是大小写敏感的吗？**

**A：**所有的 key **不区分**大小写，所有的 value **区分**大小写。事件名是 value，属性名是 key，属性值是 value。

**Q：上报自定义事件时，属性类型必须和登记的完全一致吗？是否有什么兼容策略？**

A：必须完全一致，无兼容策略。错误类型的会被 agent 直接当做脏数据抛弃

**Q：能否进行私有化部署？**

A：暂时不支持私有化部署。但我们会保证你的数据安全。

**Q：TapDB 移动端遇到了「无网络连接」的问题怎么办？**

A：可以按照下面的解决方案进行尝试。<br/>
**问题原因**：

苹果在 iOS 10 中，增加了「使用无线局域网与蜂窝移动应用」的功能。有些 App 升级后默认关闭了数据使用，导致无法联网。

**解决办法**：

1. 进入「设置-蜂窝移动网络-使用无线局域网与蜂窝移动的应用」（或者「设置-无线局域网-使用无线局域网与蜂窝移动的应用」），
   找到无法连网的 App，允许其「使用无线局域网与蜂窝移动数据」即可。

2. 另外还有一种 Bug 情况：在该列表中找不到这款无法联网的 App，怎么办？

   1. 此时，在列表中任意选择一个 App，先关闭「无线局域网与蜂窝移动数据」，即不允许其使用数据。然后再重新打开允许使用「无线局域网与蜂窝移动数据」。

   2. 返回桌面，再次打开刚才无法联网的 App，这时候系统会提示「是否允许 App 使用数据网络」，点击「允许」，App 即可顺利联网使用。

该情况主要出现在国行 iPhone 上，据说非国行的 iPhone 没有新增「是否允许「使用无线局域网与蜂窝移动应用」」的功能，因此不会出现这个问题。
在未来的 iOS 版本中，苹果应该会修复此 Bug。
